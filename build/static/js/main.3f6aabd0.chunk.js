(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(2),o=n.n(r),i=n(14),a=n.n(i),u=(n(20),n(3)),s=n(4),d=n.n(s),b="/api/persons",f={getPersons:function(){return d.a.get(b).then((function(e){return e.data}))},createPerson:function(e){return d.a.post(b,e).then((function(e){return e.data}))},deletePerson:function(e){return d.a.delete("".concat(b,"/").concat(e))},updatePerson:function(e,t){return d.a.patch("".concat(b,"/").concat(e),t)}},j=function(e){var t=e.message;if(""===t||!t)return null;return Object(c.jsx)("h1",{style:{color:"green",padding:"20px",backgroundColor:"lightgrey",borderStyle:"solid",borderRadius:"5px"},children:t})},h=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(""),a=Object(u.a)(i,2),s=a[0],d=a[1],b=Object(r.useState)(""),h=Object(u.a)(b,2),l=h[0],m=h[1],O=Object(r.useState)(""),p=Object(u.a)(O,2),v=p[0],g=p[1],x=Object(r.useState)(""),w=Object(u.a)(x,2),k=w[0],P=w[1];Object(r.useEffect)((function(){f.getPersons().then((function(e){o(e)}))}),[]);var S=v?n.filter((function(e){return e.name.toLowerCase().startsWith(v.toLowerCase())})):n,y=function(e){P(e),setTimeout((function(){P("")}),5e3)},C=function(e){var t=n.filter((function(t){return t.id===Number(e.target.id)}))[0].name;window.confirm("Delete ".concat(t,"?"))&&f.deletePerson(e.target.id).then((function(t){o(n.filter((function(t){return t.id!==Number(e.target.id)})))})).catch((function(t){o(n.filter((function(t){return t.id!==Number(e.target.id)})))}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(j,{message:k}),Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:v,onChange:function(e){g(e.target.value)}})]}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===s}));t?window.confirm("Person: ".concat(s," is already in the phonebook. Would you like to update?"))&&f.updatePerson(t.id,{number:l}).then((function(e){d(""),m("");var c=n.map((function(n){return n.id===t.id?e.data:n}));o(c),y("".concat(s,"'s phone number updated to: ").concat(l,"."))})).catch((function(e){y("Information of ".concat(s," has been removed from the server.")),o(n.filter((function(e){return e.id!==t.id&&e.name!==t.name})))})):(f.createPerson({name:s,number:l}).then((function(e){o(n.concat(e)),y("".concat(s," : ").concat(l," added to the phonebook."))})),d(""),m(""))},children:[Object(c.jsx)("h1",{children:"add a new"}),Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:s,onChange:function(e){d(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:l,onChange:function(e){m(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]}),Object(c.jsx)("h2",{children:"Numbers"}),S.map((function(e,t){return Object(c.jsxs)("div",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{id:e.id,onClick:C,children:"delete"})]},t)}))]})};a.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(h,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.3f6aabd0.chunk.js.map